---
phase: 17-landing-page-integration
plan: 02
type: execute
wave: 2
depends_on: ["17-01"]
files_modified:
  - app/app/page.tsx
  - app/middleware.ts
autonomous: false
must_haves:
  truths:
    - "Unauthenticated users see landing page at root URL (/)"
    - "Sign In button navigates to /login"
    - "Try Platform Free button navigates to /signup"
    - "Authenticated users visiting / are redirected to /dashboard"
  artifacts:
    - path: "app/app/page.tsx"
      provides: "Root page with landing page and auth redirect"
      exports: ["default"]
    - path: "app/middleware.ts"
      provides: "Auth redirect logic for root URL"
  key_links:
    - from: "app/page.tsx"
      to: "LandingPage component"
      via: "conditional render based on auth"
    - from: "middleware.ts"
      to: "redirect logic"
      via: "NextResponse.redirect for authenticated users"
---

<objective>
Wire the landing page to the root URL with authentication-aware routing.

Purpose: Ensure visitors see the marketing landing page while authenticated users are redirected to their workspace.

Output: Root page displays landing page for unauthenticated users, redirects authenticated users to dashboard.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
@~/.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/17-landing-page-integration/17-01-SUMMARY.md

@app/middleware.ts
@app/app/page.tsx
@app/components/landing/landing-page.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update root page to display landing page</name>
  <files>app/app/page.tsx</files>
  <action>
    Replace the current placeholder page with the LandingPage component:

    ```tsx
    import { LandingPage } from '@/components/landing/landing-page';

    export default function HomePage() {
      return <LandingPage />;
    }
    ```

    The page is public (not in (protected) route group), so it will render for all visitors.
    Authentication check and redirect will be handled by middleware.
  </action>
  <verify>Visit http://localhost:3000/ - should show landing page</verify>
  <done>Root page renders LandingPage component</done>
</task>

<task type="auto">
  <name>Task 2: Add middleware redirect for authenticated users</name>
  <files>app/middleware.ts</files>
  <action>
    Update the middleware to redirect authenticated users from / to /dashboard:

    1. In the middleware function, check if the path is exactly "/"
    2. If user has a valid session and is visiting "/", redirect to "/dashboard"
    3. Keep existing protected route logic intact

    The logic should be:
    - If path === "/" AND user is authenticated → redirect to /dashboard
    - If path is protected AND user is NOT authenticated → redirect to /login
    - Otherwise → continue normally

    Add to the matcher config to include root path:
    ```ts
    export const config = {
      matcher: [
        '/',
        '/dashboard/:path*',
        '/templates/:path*',
        // ... other protected paths
      ],
    };
    ```
  </action>
  <verify>
    1. Visit / when logged out → see landing page
    2. Visit / when logged in → redirected to /dashboard
  </verify>
  <done>Middleware redirects authenticated users from / to /dashboard</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Landing page at root URL with auth-aware routing</what-built>
  <how-to-verify>
    1. Run: npm run dev (in app directory)
    2. Open browser in incognito mode (no session)
    3. Visit: http://localhost:3000/
    4. Confirm: Landing page displays with:
       - Hero section with "Report Faster. Think Smarter."
       - Demo carousel with screenshots cycling
       - Features grid (6 cards)
       - Pricing section (4 tiers)
       - Privacy section
       - CTA section at bottom
    5. Click "Sign In" button → navigates to /login
    6. Click "Try Platform Free" → navigates to /signup
    7. Log in with a test account
    8. Visit http://localhost:3000/ again
    9. Confirm: Redirected to /dashboard
    10. Test responsive:
        - Desktop (>1024px): Full layout
        - Mobile (375px): Stacked layout, carousel fills width
  </how-to-verify>
  <resume-signal>Type "approved" if landing page works correctly, or describe any issues</resume-signal>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] Landing page displays at / for unauthenticated users
- [ ] Sign In button navigates to /login
- [ ] Try Platform Free button navigates to /signup
- [ ] Authenticated users redirected from / to /dashboard
- [ ] Demo carousel cycles through screenshots
- [ ] Responsive design works
</verification>

<success_criteria>
- Landing page is the first page visitors see
- Auth routing works correctly (redirect logged-in users)
- All navigation buttons work
- Visual verification passed
</success_criteria>

<output>
After completion, create `.planning/phases/17-landing-page-integration/17-02-SUMMARY.md`
</output>
