---
phase: 18-landing-page-carousel-enhancement
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - app/scripts/capture-screenshots.ts
  - app/public/demo-screenshots/*.webp
  - app/components/landing/demo-animation.tsx
  - app/components/landing/landing-page.tsx
  - app/package.json
autonomous: false

must_haves:
  truths:
    - "Playwright script can capture all workflow screenshots automatically"
    - "Screenshots are optimized for web delivery (WebP format, compressed)"
    - "Carousel loads and displays optimized screenshots without errors"
    - "Screenshots accurately represent current app UI"
    - "Script is reproducible for future UI updates"
  artifacts:
    - path: "app/scripts/capture-screenshots.ts"
      provides: "Automated screenshot capture using Playwright"
      min_lines: 50
    - path: "app/public/demo-screenshots/"
      provides: "Optimized WebP screenshots for carousel"
    - path: "app/components/landing/demo-animation.tsx"
      provides: "Updated image references for WebP format"
  key_links:
    - from: "scripts/capture-screenshots.ts"
      to: "app pages"
      via: "Playwright navigation and screenshot"
      pattern: "page\\.goto.*page\\.screenshot"
    - from: "demo-animation.tsx"
      to: "public/demo-screenshots"
      via: "Image src references"
      pattern: "/demo-screenshots/.*\\.webp"
---

<objective>
Automate screenshot capture for landing page carousel and optimize images for web delivery.

Purpose: Create reproducible automation for capturing fresh screenshots when UI changes, and optimize images for faster page load times on the landing page.

Output: Playwright script for automated capture, optimized WebP screenshots, updated carousel component.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
@~/.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

# Phase 17 completed landing page integration
@.planning/phases/17-landing-page-integration/17-01-SUMMARY.md

# Current carousel implementation
@app/components/landing/demo-animation.tsx
@app/components/landing/landing-page.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Playwright screenshot automation script</name>
  <files>app/scripts/capture-screenshots.ts, app/package.json</files>
  <action>
    Create a Playwright script that automates capturing all 14 workflow screenshots:

    1. Add script dependency if needed: `sharp` for image optimization
    2. Create `app/scripts/capture-screenshots.ts` with:
       - Configuration array matching current screenshot IDs and descriptions
       - Function to start local dev server (or expect it running)
       - Authentication helper (login with test credentials or bypass for public pages)
       - Screenshot capture sequence matching the demo flow:
         - 1. Transcribe home (empty state)
         - 2. File upload dialog
         - 3. Recording in progress
         - 4. Transcribing (processing state)
         - 5. Select template prompt
         - 6. Template selection modal
         - 7. Ready to generate
         - 8. Generating report (loading state)
         - 9. Generated report
         - 10. Templates library
         - 11. Create template (clone pathway)
         - 12. Create template (blank + AI)
         - 13. Macro library
         - 14. Create macro modal
       - Each screenshot: navigate, wait for stability, capture at 1920x1080 viewport
       - Save as PNG initially (sharp will convert to WebP)

    3. Add npm script: `"capture-screenshots": "npx tsx scripts/capture-screenshots.ts"`

    IMPORTANT: The script should work with a running dev server (expect `npm run dev` to be running).
    Use `waitForLoadState('networkidle')` before each capture for stability.
    For modals/dialogs, trigger the action then wait for animation to complete.
  </action>
  <verify>
    - Script file exists at app/scripts/capture-screenshots.ts
    - Script compiles without TypeScript errors: `npx tsc --noEmit scripts/capture-screenshots.ts`
    - npm script added to package.json
  </verify>
  <done>
    Playwright automation script ready to capture all 14 workflow screenshots
  </done>
</task>

<task type="auto">
  <name>Task 2: Optimize images and update component references</name>
  <files>app/public/demo-screenshots/*.webp, app/components/landing/demo-animation.tsx, app/components/landing/landing-page.tsx</files>
  <action>
    1. Install sharp if not present: `pnpm add -D sharp`

    2. Create image optimization script (can be part of capture-screenshots.ts or separate):
       - Convert existing PNG screenshots to WebP format
       - Target quality: 85 (good balance of quality/size)
       - Resize to max 1920px width (preserve aspect ratio)
       - Output to same directory with .webp extension

    3. Update landing-page.tsx DemoScreenshot data:
       - Change all `imageSrc` paths from `.png` to `.webp`
       - Example: `/demo-screenshots/1-transcribe home.png` → `/demo-screenshots/1-transcribe home.webp`

    4. Keep original PNG files as backup (don't delete) for now.

    5. Run the optimization to generate WebP files from existing PNGs.

    Expected file size reduction: ~50-70% (PNG ~1MB total → WebP ~300-400KB)
  </action>
  <verify>
    - WebP files exist in app/public/demo-screenshots/
    - `ls -la app/public/demo-screenshots/*.webp` shows all 14 files
    - Combined WebP size < 500KB: `du -ch app/public/demo-screenshots/*.webp | tail -1`
    - landing-page.tsx references .webp files: `grep -c ".webp" app/components/landing/landing-page.tsx` returns 14+
    - Build passes: `pnpm build` (check for image loading errors)
  </verify>
  <done>
    All 14 screenshots converted to WebP, component updated to reference new format
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
    Automated screenshot capture script and optimized WebP images for landing page carousel.
    - Playwright script at app/scripts/capture-screenshots.ts
    - WebP optimized screenshots in app/public/demo-screenshots/
    - Updated carousel to use WebP images
  </what-built>
  <how-to-verify>
    1. Run: pnpm dev (if not already running)
    2. Visit: http://localhost:3000
    3. Scroll to "See It In Action" carousel section
    4. Verify:
       - All 14 screenshots load correctly (no broken images)
       - Carousel auto-advances smoothly
       - Images are crisp and readable
       - Marketing text panels display correctly
       - Mobile responsive layout works (resize browser)
    5. Check DevTools Network tab:
       - Images should be .webp format
       - Individual image sizes should be < 50KB each
       - Total carousel images < 500KB
  </how-to-verify>
  <resume-signal>Type "approved" if carousel displays correctly with optimized images, or describe any issues</resume-signal>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] Playwright script exists and compiles
- [ ] WebP screenshots generated (14 files)
- [ ] Total WebP size < 500KB
- [ ] landing-page.tsx uses .webp paths
- [ ] pnpm build succeeds without image errors
- [ ] Carousel displays all screenshots in browser
</verification>

<success_criteria>
- All tasks completed
- Playwright automation script ready for future use
- Screenshots optimized to WebP format with significant size reduction
- Carousel displays optimized images without visual degradation
- User verified carousel works correctly
</success_criteria>

<output>
After completion, create `.planning/phases/18-landing-page-carousel-enhancement/18-01-SUMMARY.md`
</output>
