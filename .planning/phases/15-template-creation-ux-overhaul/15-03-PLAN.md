---
phase: 15-template-creation-ux-overhaul
plan: 03
type: execute
wave: 1
depends_on: []
files_modified:
  - app/components/template-builder/template-preview.tsx
  - app/components/template-builder/creation-pathway-modal.tsx
  - app/package.json
autonomous: true

must_haves:
  truths:
    - "Live preview shows template sections as user edits"
    - "Placeholders are visually highlighted in preview"
    - "User can choose between 4 creation pathways"
  artifacts:
    - path: "app/components/template-builder/template-preview.tsx"
      provides: "Real-time template preview with placeholder highlighting"
      exports: ["TemplatePreview"]
      min_lines: 50
    - path: "app/components/template-builder/creation-pathway-modal.tsx"
      provides: "Modal with 4 creation pathway options"
      exports: ["CreationPathwayModal"]
      min_lines: 80
  key_links:
    - from: "template-preview.tsx"
      to: "template-schema.ts"
      via: "accepts TemplateSection array"
      pattern: "TemplateSection"
    - from: "creation-pathway-modal.tsx"
      to: "Dialog component"
      via: "Radix dialog wrapper"
      pattern: "Dialog"
---

<objective>
Create template preview component and creation pathway selection modal.

Purpose: Enable live preview and guided creation flow selection.
Output: TemplatePreview and CreationPathwayModal components ready for integration.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

# Research findings for preview patterns
@.planning/phases/15-template-creation-ux-overhaul/15-RESEARCH.md

# Existing template schema
@app/lib/validation/template-schema.ts

# Existing Dialog component
@app/components/ui/dialog.tsx

# Design system patterns
@app/styles/globals.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install react-resizable-panels</name>
  <files>app/package.json</files>
  <action>
    Run: cd app && pnpm add react-resizable-panels

    This library provides:
    - Panel, PanelGroup, PanelResizeHandle components
    - Accessible resize with keyboard support
    - Layout persistence via autoSaveId

    Do NOT install react-split-pane (outdated) or custom resize handlers.
  </action>
  <verify>cd app && pnpm list react-resizable-panels shows version installed</verify>
  <done>react-resizable-panels installed in app/package.json</done>
</task>

<task type="auto">
  <name>Task 2: Create TemplatePreview component</name>
  <files>app/components/template-builder/template-preview.tsx</files>
  <action>
    Create new file app/components/template-builder/template-preview.tsx.

    Component requirements:
    1. Accept props: { name: string, description: string, sections: TemplateSection[] }
    2. Use useMemo to render content with placeholder highlighting
    3. Replace [placeholder] with styled span (bg-brand/20, text-brand, rounded)
    4. Replace (instructions) with styled span (text-text-secondary, italic)
    5. Replace "verbatim" with styled span (font-semibold)
    6. Display template name as heading
    7. Display description in muted text
    8. Map over sections, show section name in uppercase with content below
    9. Handle empty state (no sections) gracefully

    Styling pattern:
    ```typescript
    const renderedContent = useMemo(() => {
      return section.content
        .replace(/\[([^\]]+)\]/g, '<span class="inline-block px-1 py-0.5 bg-brand/20 text-brand rounded text-sm">[$1]</span>')
        .replace(/\(([^)]+)\)/g, '<span class="text-text-secondary italic">($1)</span>')
        .replace(/"([^"]+)"/g, '<span class="font-semibold">"$1"</span>');
    }, [section.content]);
    ```

    Use dangerouslySetInnerHTML with the rendered content.
    Note: Content is from our own editor, not external input, so XSS risk is minimal.
    If paranoid, could sanitize with DOMPurify but not required for MVP.

    Export TemplatePreview as named export.
  </action>
  <verify>cd app && npx tsc --noEmit passes</verify>
  <done>TemplatePreview renders sections with placeholder highlighting</done>
</task>

<task type="auto">
  <name>Task 3: Create CreationPathwayModal component</name>
  <files>app/components/template-builder/creation-pathway-modal.tsx</files>
  <action>
    Create new file app/components/template-builder/creation-pathway-modal.tsx.

    Component requirements:
    1. Accept props: { open: boolean, onOpenChange: (open: boolean) => void, onSelect: (pathway: PathwayType) => void }
    2. PathwayType = 'manual' | 'ai' | 'clone' | 'import'
    3. Use existing Dialog component from @/components/ui/dialog
    4. Display 4 pathway options as cards/buttons:
       - Manual: "Start from scratch" - icon: FileEdit, description: "Build your template section by section"
       - AI-Assisted: "Describe your template" - icon: Sparkles, description: "AI generates a structured template from your description"
       - Clone: "Start from existing" - icon: Copy, description: "Copy an existing template and customize it"
       - Import: "Import JSON" - icon: Upload, description: "Import a template from a JSON file"
    5. Each option is a button that calls onSelect(pathway) and closes modal
    6. Use grid layout (2x2 on desktop, 1 column on mobile)
    7. Highlight on hover with brand color border

    Icons from lucide-react: FileEdit, Sparkles, Copy, Upload

    Export CreationPathwayModal as named export.
    Export PathwayType type.
  </action>
  <verify>cd app && npx tsc --noEmit passes</verify>
  <done>CreationPathwayModal shows 4 pathway options and emits selection</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `cd app && pnpm list react-resizable-panels` shows version installed
- [ ] `cd app && npx tsc --noEmit` passes
- [ ] TemplatePreview renders sections with highlighted placeholders
- [ ] CreationPathwayModal displays 4 options and closes on selection
</verification>

<success_criteria>
- All tasks completed
- All verification checks pass
- react-resizable-panels installed
- Both components export correctly
</success_criteria>

<output>
After completion, create `.planning/phases/15-template-creation-ux-overhaul/15-03-SUMMARY.md`
</output>
