# ============================================
# AI Radiologist - Environment Configuration
# ============================================
# Copy this file to .env.local for development
#
# Environment variable scoping for Vercel:
#   - Development: Local .env.local file
#   - Preview: Vercel Dashboard → Settings → Environment Variables (Preview)
#   - Production: Vercel Dashboard → Settings → Environment Variables (Production)
#
# Variables prefixed with NEXT_PUBLIC_ are exposed to the browser.
# All other variables are server-only.
# ============================================

# -----------------------
# Supabase Configuration
# -----------------------
# Get from: https://supabase.com/dashboard/project/_/settings/api

# Public URL (exposed to browser)
NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co

# Anonymous key (exposed to browser - safe for client-side auth)
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJ...

# Service role key (server-only - NEVER expose to client)
# Used for admin operations bypassing RLS
SUPABASE_SERVICE_ROLE_KEY=eyJ...

# Connection pooler URL for direct DB access (optional)
# Get from: Supabase Dashboard → Settings → Database → Connection String (Pooler)
# SUPABASE_POOLER_URL=postgres://user:pass@your-project.supabase.co:6543/postgres

# -----------------------
# Google OAuth (Optional)
# -----------------------
# Configure in Supabase Dashboard → Authentication → Providers → Google
# These are set in Supabase, not in your app's environment variables
# SUPABASE_AUTH_EXTERNAL_GOOGLE_CLIENT_ID=your-google-client-id.apps.googleusercontent.com
# SUPABASE_AUTH_EXTERNAL_GOOGLE_SECRET=your-google-client-secret

# -----------------------
# OpenAI Configuration
# -----------------------
# Get from: https://platform.openai.com/api-keys

OPENAI_API_KEY=sk-proj-...

# Model configuration (defaults in code if not set)
# OPENAI_MODEL_GENERATE=gpt-4o
# OPENAI_MODEL_WHISPER=whisper-1

# -----------------------
# Stripe Configuration
# -----------------------
# Get from: https://dashboard.stripe.com/apikeys
#
# IMPORTANT: Use test keys for development/preview, live keys for production only
# Test mode: sk_test_... and pk_test_...
# Live mode: sk_live_... and pk_live_...

# Secret key (server-only)
# Test: sk_test_...  |  Live: sk_live_...
STRIPE_SECRET_KEY=sk_test_...

# Publishable key (exposed to browser)
# Test: pk_test_...  |  Live: pk_live_...
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=pk_test_...

# Webhook signing secret
# Get from: Stripe Dashboard → Developers → Webhooks → Signing secret
# Local dev: Use `stripe listen --forward-to localhost:3000/api/stripe/webhook` CLI to get whsec_...
STRIPE_WEBHOOK_SECRET=whsec_...

# Price IDs for subscription plans
# Get from: Stripe Dashboard → Products → [Product] → Pricing → API ID
STRIPE_PRICE_ID_PLUS=price_...
STRIPE_PRICE_ID_PRO=price_...

# -----------------------
# Application Settings
# -----------------------

# Environment (development, preview, production)
NODE_ENV=development

# Public app URL (used for OAuth callbacks, email links)
# Development: http://localhost:3000
# Preview: Automatically available via VERCEL_URL (https://<deployment-url>.vercel.app)
# Production: Your custom domain (https://yourapp.com)
NEXT_PUBLIC_APP_URL=http://localhost:3000

# -----------------------
# Optional: Redis/Upstash (Rate Limiting)
# -----------------------
# Get from: https://console.upstash.com/
# Not required for initial deployment - can add later for rate limiting

# UPSTASH_REDIS_REST_URL=https://your-instance.upstash.io
# UPSTASH_REDIS_REST_TOKEN=your_token

# -----------------------
# Optional: Storage (Audio Transcription)
# -----------------------
# Only needed if using file-based transcription with encryption
# Default bucket: audio-temp (Supabase Storage)

# TRANSCRIBE_STORAGE_BUCKET=audio-temp
# TRANSCRIBE_ENCRYPTION_KEY=your-32-character-encryption-key-here

# ============================================
# Vercel Deployment Checklist
# ============================================
# 1. Required for all environments:
#    - NEXT_PUBLIC_SUPABASE_URL
#    - NEXT_PUBLIC_SUPABASE_ANON_KEY
#    - SUPABASE_SERVICE_ROLE_KEY
#    - OPENAI_API_KEY
#    - STRIPE_SECRET_KEY
#    - NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY
#    - STRIPE_WEBHOOK_SECRET
#    - STRIPE_PRICE_ID_PLUS
#    - STRIPE_PRICE_ID_PRO
#
# 2. Production-specific:
#    - NEXT_PUBLIC_APP_URL (set to your custom domain)
#    - Use LIVE Stripe keys (sk_live_..., pk_live_...)
#    - Configure Stripe webhook endpoint for production URL
#
# 3. Optional (can add later):
#    - UPSTASH_REDIS_REST_URL / TOKEN (rate limiting)
#    - SUPABASE_POOLER_URL (if needed for direct DB queries)
# ============================================
