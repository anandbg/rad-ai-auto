@tailwind base;
@tailwind components;
@tailwind utilities;

/* Design Tokens - WCAG 2.1 AA Compliant
 * All text colors: >= 4.5:1 contrast ratio against background
 * Large text/UI components: >= 3:1 contrast ratio
 * Focus/brand colors: >= 3:1 contrast ratio against background
 * Verified: 2026-01-16
 *
 * Light mode (--bg: #ffffff):
 *   --text-primary (#0f172a): 15.76:1 contrast
 *   --text-secondary (#475569): 6.97:1 contrast
 *   --text-muted (#64748b): 4.68:1 contrast
 *   --brand (#7c2d3c): 7.05:1 contrast
 *   --focus (#3b82f6): 4.50:1 contrast
 *
 * Dark mode (--bg: #0f172a):
 *   --text-primary (#f8fafc): 15.76:1 contrast
 *   --text-secondary (#cbd5e1): 10.87:1 contrast
 *   --text-muted (#94a3b8): 6.63:1 contrast
 *   --brand (#e08a98): 6.82:1 contrast
 *   --focus (#60a5fa): 6.59:1 contrast (lighter blue for dark mode)
 */
:root {
  /* Light theme colors */
  --bg: #ffffff;
  --surface: #f8fafc;
  --surface-muted: #f1f5f9;
  --surface-raised: #ffffff;

  --text-primary: #0f172a;
  --text-secondary: #475569;
  --text-muted: #64748b;

  /* Brand colors - Burgundy */
  --brand: #7c2d3c;
  --brand-foreground: #ffffff;

  /* Landing page brand colors - modern blue-purple */
  --brand-light: #eef2ff;
  --brand-muted: #e0e7ff;
  --brand-strong: #4f46e5;
  --success-light: #d1fae5;
  --foreground-secondary: #475569;
  --foreground-muted: #94a3b8;
  --surface-border: #e2e8f0;

  /* Semantic colors - WCAG AA compliant (4.5:1 contrast with white) */
  --success: #166534;
  --success-foreground: #ffffff;
  --warning: #92400e;
  --warning-foreground: #ffffff;
  --danger: #b91c1c;
  --danger-foreground: #ffffff;
  --info: #1d4ed8;
  --info-foreground: #ffffff;

  /* Focus */
  --focus: #3b82f6;

  /* Borders */
  --border: #e2e8f0;
  --border-muted: #f1f5f9;

  /* Font */
  --font-sans: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto,
    'Helvetica Neue', Arial, 'Noto Sans', sans-serif;
}

/* Dark theme */
[data-theme='dark'] {
  --bg: #0f172a;
  --surface: #1e293b;
  --surface-muted: #334155;
  --surface-raised: #1e293b;

  --text-primary: #f8fafc;
  --text-secondary: #cbd5e1;
  --text-muted: #94a3b8;

  --brand: #e08a98;
  --brand-foreground: #0f172a;

  /* Landing page brand colors - dark mode */
  --brand-light: #1e3a8a;
  --brand-muted: #1e3a8a;
  --brand-strong: #3b82f6;
  --success-light: #14532d;
  --foreground-secondary: #d4d4d8;
  --foreground-muted: #a1a1aa;
  --surface-border: #3f3f46;

  /* Lighter focus color for dark mode - 6.59:1 contrast */
  --focus: #60a5fa;

  --border: #334155;
  --border-muted: #1e293b;

  /* Semantic colors for dark mode - maintain contrast */
  --success: #22c55e;
  --success-foreground: #0f172a;
  --warning: #f59e0b;
  --warning-foreground: #0f172a;
  --danger: #ef4444;
  --danger-foreground: #ffffff;
  --info: #60a5fa;
  --info-foreground: #0f172a;
}

/* Base styles */
@layer base {
  * {
    border-color: var(--border);
  }

  body {
    @apply bg-background text-text-primary;
    font-family: var(--font-sans);
  }

  /* Focus ring utility */
  .focus-ring {
    @apply outline-none ring-2 ring-offset-2;
    ring-color: var(--focus);
    ring-offset-color: var(--bg);
  }

  /* Custom focus-visible styles - visible on all interactive elements
   * Uses ring instead of outline for consistent appearance across browsers.
   * 2px ring with 2px offset provides clear visibility against any background.
   */
  :focus-visible {
    @apply focus-ring;
  }

  /* Fallback outline style for elements that may not support ring properly */
  :focus-visible:not(:has(*)) {
    outline: 2px solid var(--focus);
    outline-offset: 2px;
  }
}

@layer components {
  /* Skip link for accessibility - 44px minimum touch target */
  .skip-link {
    @apply absolute -top-12 left-4 z-50 rounded bg-brand px-4 py-2.5 min-h-[44px] text-brand-foreground;
    @apply focus:top-4 focus:outline-none inline-flex items-center;
  }

  /* Loading skeleton */
  .skeleton {
    @apply animate-skeleton-pulse rounded bg-surface-muted;
  }

  /* Card component base */
  .card {
    @apply rounded-xl border bg-surface-raised shadow-md;
  }

  /* Button base styles - 44px minimum touch target for accessibility */
  .btn {
    @apply inline-flex items-center justify-center rounded-xl px-4 py-2.5 text-sm font-medium min-h-[44px];
    @apply transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2;
    @apply disabled:pointer-events-none disabled:opacity-50;
  }

  .btn-primary {
    @apply btn bg-brand text-brand-foreground hover:opacity-90;
    ring-color: var(--brand);
  }

  .btn-secondary {
    @apply btn border bg-surface hover:bg-surface-muted;
  }

  .btn-danger {
    @apply btn bg-danger text-danger-foreground hover:opacity-90;
    ring-color: var(--danger);
  }

  /* Input base styles - 44px minimum touch target for accessibility */
  .input {
    @apply flex h-11 w-full rounded-lg border bg-background px-3 py-2.5 text-sm;
    @apply placeholder:text-text-muted;
    @apply focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2;
    @apply disabled:cursor-not-allowed disabled:opacity-50;
    ring-color: var(--focus);
  }

  /* Label styles */
  .label {
    @apply text-sm font-medium text-text-primary;
  }

  /* Toast styles */
  .toast {
    @apply rounded-lg border bg-surface-raised px-4 py-3 shadow-lg;
  }

  .toast-success {
    @apply toast border-success/50 bg-success/10;
  }

  .toast-error {
    @apply toast border-danger/50 bg-danger/10;
  }
}

@layer utilities {
  /* Grid pattern background */
  .bg-grid-pattern {
    background-image:
      linear-gradient(to right, var(--border) 1px, transparent 1px),
      linear-gradient(to bottom, var(--border) 1px, transparent 1px);
    background-size: 20px 20px;
    opacity: 0.1;
  }

  /* Hide scrollbar but keep functionality */
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }

  /* Truncate with ellipsis */
  .truncate-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .truncate-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
}

/* Accessibility: Reduced Motion
 * Disables all animations for users who prefer reduced motion.
 * This is a CSS fallback - motion components also use useReducedMotion hook.
 * WCAG 2.1 AA Success Criterion 2.3.3: Animation from Interactions
 */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}
